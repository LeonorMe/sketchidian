{
  "version": 3,
  "sources": ["src/main.ts", "src/views/DrawingView.ts", "src/drawing/CanvasManager.ts"],
  "sourcesContent": ["import { Plugin } from \"obsidian\";\r\nimport { DrawingView, DRAWING_VIEW_TYPE } from \"./views/DrawingView\";\r\n\r\nexport default class SketchWhiteboardPlugin extends Plugin {\r\n\r\n    async onload() {\r\n        this.registerView(\r\n            DRAWING_VIEW_TYPE,\r\n            (leaf) => new DrawingView(leaf)\r\n        );\r\n\r\n        this.addCommand({\r\n            id: \"open-sketch-whiteboard\",\r\n            name: \"Open Sketch Whiteboard\",\r\n            callback: () => this.openWhiteboard()\r\n        });\r\n    }\r\n\r\n    async openWhiteboard() {\r\n        const leaf = this.app.workspace.getLeaf(true);\r\n        await leaf.setViewState({\r\n            type: DRAWING_VIEW_TYPE,\r\n            active: true\r\n        });\r\n    }\r\n}\r\n", "import { ItemView, WorkspaceLeaf } from \"obsidian\";\r\nimport { CanvasManager } from \"../drawing/CanvasManager\";\r\n\r\n\r\nexport const DRAWING_VIEW_TYPE = \"sketch-whiteboard-view\";\r\n\r\nexport class DrawingView extends ItemView {\r\n    canvasManager?: CanvasManager;\r\n\r\n    constructor(leaf: WorkspaceLeaf) {\r\n        super(leaf);\r\n    }\r\n\r\n    getViewType() {\r\n        return DRAWING_VIEW_TYPE;\r\n    }\r\n\r\n    getDisplayText() {\r\n        return \"Sketch Whiteboard\";\r\n    }\r\n\r\n    async onOpen() {\r\n        const container = this.containerEl.children[1] as HTMLElement;\r\n        container.empty();\r\n\r\n        this.canvasManager = new CanvasManager(container);\r\n        this.canvasManager.initialize();\r\n    }\r\n}\r\n\r\n", "export interface CanvasLayer {\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n    visible: boolean;\r\n    locked: boolean;\r\n}\r\n\r\nexport class CanvasManager {\r\n    container: HTMLElement;\r\n    boardEl!: HTMLDivElement;\r\n    layers: CanvasLayer[] = [];\r\n    activeLayerIndex = 0;\r\n\r\n    constructor(container: HTMLElement) {\r\n        this.container = container;\r\n    }\r\n\r\n    initialize() {\r\n        // Board wrapper\r\n        this.boardEl = document.createElement(\"div\");\r\n        this.boardEl.className = \"sketch-board\";\r\n        this.container.appendChild(this.boardEl);\r\n\r\n        // Criar 3 layers\r\n        for (let i = 0; i < 3; i++) {\r\n            const canvas = document.createElement(\"canvas\");\r\n            canvas.className = \"sketch-layer\";\r\n\r\n            const ctx = canvas.getContext(\"2d\");\r\n            if (!ctx) throw new Error(\"Canvas 2D context not available\");\r\n\r\n            this.boardEl.appendChild(canvas);\r\n\r\n            this.layers.push({\r\n                canvas,\r\n                ctx,\r\n                visible: true,\r\n                locked: false\r\n            });\r\n        }\r\n\r\n        this.resize();\r\n        this.bindResize();\r\n    }\r\n\r\n    bindResize() {\r\n        window.addEventListener(\"resize\", () => this.resize());\r\n    }\r\n\r\n    resize() {\r\n        const rect = this.boardEl.getBoundingClientRect();\r\n        const dpr = window.devicePixelRatio || 1;\r\n\r\n        this.layers.forEach((layer) => {\r\n            const canvas = layer.canvas;\r\n            const ctx = layer.ctx;\r\n\r\n            canvas.width = rect.width * dpr;\r\n            canvas.height = rect.height * dpr;\r\n\r\n            canvas.style.width = `${rect.width}px`;\r\n            canvas.style.height = `${rect.height}px`;\r\n\r\n            ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\r\n            ctx.lineCap = \"round\";\r\n            ctx.lineJoin = \"round\";\r\n        });\r\n    }\r\n\r\n    getActiveLayer(): CanvasLayer {\r\n        return this.layers[this.activeLayerIndex];\r\n    }\r\n\r\n    setActiveLayer(index: number) {\r\n        if (index < 0 || index > 2) return;\r\n        this.activeLayerIndex = index;\r\n    }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAA,mBAAuB;;;ACAvB,sBAAwC;;;ACOjC,IAAM,gBAAN,MAAoB;AAAA,EAMvB,YAAY,WAAwB;AAHpC,kBAAwB,CAAC;AACzB,4BAAmB;AAGf,SAAK,YAAY;AAAA,EACrB;AAAA,EAEA,aAAa;AAET,SAAK,UAAU,SAAS,cAAc,KAAK;AAC3C,SAAK,QAAQ,YAAY;AACzB,SAAK,UAAU,YAAY,KAAK,OAAO;AAGvC,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AACxB,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,aAAO,YAAY;AAEnB,YAAM,MAAM,OAAO,WAAW,IAAI;AAClC,UAAI,CAAC,IAAK,OAAM,IAAI,MAAM,iCAAiC;AAE3D,WAAK,QAAQ,YAAY,MAAM;AAE/B,WAAK,OAAO,KAAK;AAAA,QACb;AAAA,QACA;AAAA,QACA,SAAS;AAAA,QACT,QAAQ;AAAA,MACZ,CAAC;AAAA,IACL;AAEA,SAAK,OAAO;AACZ,SAAK,WAAW;AAAA,EACpB;AAAA,EAEA,aAAa;AACT,WAAO,iBAAiB,UAAU,MAAM,KAAK,OAAO,CAAC;AAAA,EACzD;AAAA,EAEA,SAAS;AACL,UAAM,OAAO,KAAK,QAAQ,sBAAsB;AAChD,UAAM,MAAM,OAAO,oBAAoB;AAEvC,SAAK,OAAO,QAAQ,CAAC,UAAU;AAC3B,YAAM,SAAS,MAAM;AACrB,YAAM,MAAM,MAAM;AAElB,aAAO,QAAQ,KAAK,QAAQ;AAC5B,aAAO,SAAS,KAAK,SAAS;AAE9B,aAAO,MAAM,QAAQ,GAAG,KAAK,KAAK;AAClC,aAAO,MAAM,SAAS,GAAG,KAAK,MAAM;AAEpC,UAAI,aAAa,KAAK,GAAG,GAAG,KAAK,GAAG,CAAC;AACrC,UAAI,UAAU;AACd,UAAI,WAAW;AAAA,IACnB,CAAC;AAAA,EACL;AAAA,EAEA,iBAA8B;AAC1B,WAAO,KAAK,OAAO,KAAK,gBAAgB;AAAA,EAC5C;AAAA,EAEA,eAAe,OAAe;AAC1B,QAAI,QAAQ,KAAK,QAAQ,EAAG;AAC5B,SAAK,mBAAmB;AAAA,EAC5B;AACJ;;;ADzEO,IAAM,oBAAoB;AAE1B,IAAM,cAAN,cAA0B,yBAAS;AAAA,EAGtC,YAAY,MAAqB;AAC7B,UAAM,IAAI;AAAA,EACd;AAAA,EAEA,cAAc;AACV,WAAO;AAAA,EACX;AAAA,EAEA,iBAAiB;AACb,WAAO;AAAA,EACX;AAAA,EAEA,MAAM,SAAS;AACX,UAAM,YAAY,KAAK,YAAY,SAAS,CAAC;AAC7C,cAAU,MAAM;AAEhB,SAAK,gBAAgB,IAAI,cAAc,SAAS;AAChD,SAAK,cAAc,WAAW;AAAA,EAClC;AACJ;;;ADzBA,IAAqB,yBAArB,cAAoD,wBAAO;AAAA,EAEvD,MAAM,SAAS;AACX,SAAK;AAAA,MACD;AAAA,MACA,CAAC,SAAS,IAAI,YAAY,IAAI;AAAA,IAClC;AAEA,SAAK,WAAW;AAAA,MACZ,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,UAAU,MAAM,KAAK,eAAe;AAAA,IACxC,CAAC;AAAA,EACL;AAAA,EAEA,MAAM,iBAAiB;AACnB,UAAM,OAAO,KAAK,IAAI,UAAU,QAAQ,IAAI;AAC5C,UAAM,KAAK,aAAa;AAAA,MACpB,MAAM;AAAA,MACN,QAAQ;AAAA,IACZ,CAAC;AAAA,EACL;AACJ;",
  "names": ["import_obsidian"]
}
